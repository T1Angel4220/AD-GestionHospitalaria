-- Actualización del esquema para agregar campos de recuperación de contraseña
USE hospital_central;

-- Agregar campos para recuperación de contraseña a la tabla usuarios
ALTER TABLE usuarios 
ADD COLUMN reset_token VARCHAR(255) NULL,
ADD COLUMN reset_expires DATETIME NULL;

-- Crear índice para mejorar performance en búsquedas de tokens
CREATE INDEX idx_reset_token ON usuarios(reset_token);

-- Insertar datos de ejemplo para testing
-- Centros médicos
INSERT INTO centros_medicos (nombre, ciudad, direccion) VALUES
('Hospital Central', 'Bogotá', 'Calle 123 #45-67'),
('Clínica San Rafael', 'Medellín', 'Carrera 50 #80-25'),
('Hospital Universitario', 'Cali', 'Avenida 6N #28-40');

-- Especialidades
INSERT INTO especialidades (nombre) VALUES
('Medicina General'),
('Cardiología'),
('Neurología'),
('Pediatría'),
('Ginecología'),
('Ortopedia'),
('Dermatología');

-- Médicos
INSERT INTO medicos (nombres, apellidos, id_especialidad, id_centro) VALUES
('Juan Carlos', 'García López', 1, 1),
('María Elena', 'Rodríguez Silva', 2, 1),
('Carlos Alberto', 'Martínez Pérez', 3, 1),
('Ana Lucía', 'González Torres', 4, 2),
('Roberto', 'Hernández Castro', 5, 2),
('Patricia', 'Morales Jiménez', 6, 3);

-- Usuario admin para el sistema
INSERT INTO usuarios (email, password_hash, rol, id_centro) VALUES
('admin@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'admin', 1);
-- Contraseña: admin123

-- Usuarios médicos
INSERT INTO usuarios (email, password_hash, rol, id_centro, id_medico) VALUES
('juan.garcia@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 1, 1),
('maria.rodriguez@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 1, 2),
('carlos.martinez@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 1, 3),
('ana.gonzalez@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 2, 4),
('roberto.hernandez@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 2, 5),
('patricia.morales@hospital.com', '$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/8KzKz2W', 'medico', 3, 6);
-- Contraseña para todos: admin123
